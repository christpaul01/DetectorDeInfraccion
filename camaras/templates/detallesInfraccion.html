{% extends "./BaseCamaras.html" %}

{% block body %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="text-center mb-4">Detalles de la Infracción</h1>
            <div class="card shadow">
                <div class="card-header text-white bg-danger">
                    <h5 class="mb-0 text-center">Infracción ID: {{ infraccion.id_infraccion }}</h5>
                </div>
                <div class="card-body d-flex flex-column align-items-center">

                    <!-- Vista previa de la imagen del vehículo -->
                    {% if infraccion.vehicle_image_base64 %}
                        <div class="mt-4 text-center">
                            <h5>Imagen del Vehículo Detectado:</h5>
                            <img src="data:image/jpeg;base64,{{ infraccion.vehicle_image_base64 }}" alt="Imagen del vehículo" class="img-fluid rounded" style="max-height: 300px; object-fit: cover;">
                        </div>
                    {% endif %}
                    <br>

                    <h4 class="card-title text-center">Información de la Infracción</h4>
                    <ul class="list-group list-group-flush text-center">
                        <li class="list-group-item"><strong>ID Vehículo:</strong> {{ infraccion.id_vehiculo }}</li>
                        <li class="list-group-item"><strong>Tipo de Vehículo:</strong> {{ tipo_vehiculo }}</li>
                        <li class="list-group-item"><strong>Cámara:</strong> {{ camara.nombre_camara }}</li>
                        <li class="list-group-item"><strong>Fecha de Infracción:</strong> {{ infraccion.fecha_infraccion|date:"d-m-Y H:i" }}</li>
                        <li class="list-group-item"><strong>Tipo de Infracción:</strong> {{ tipo_infraccion }}</li>
                        <li class="list-group-item"><strong>Video de Infracción:</strong>
                            <a href="/streamInfracciones/{{ infraccion.id_infraccion }}" target="_blank">Ver Segmento</a>
                        </li>
                        <li class="list-group-item"><strong>Frame Inicio:</strong> {{ infraccion.frame_inicio }}</li>
                        <li class="list-group-item"><strong>Frame Final:</strong> {{ infraccion.frame_final }}</li>
                        <li class="list-group-item"><strong>Estado de Infracción:</strong> {{ infraccion.estado_infraccion }}</li>
                        <li class="list-group-item"><strong>Revisión de Infracción:</strong> {{ infraccion.revision_infraccion }}</li>
                        <li class="list-group-item"><strong>Notas:</strong> {{ infraccion.notas }}</li>
                    </ul>

                    <div class="mt-3 text-center">
                        <a href="/streamInfracciones/{{ infraccion.id_infraccion }}" class="btn btn-primary">Revisar Infracción</a>
                        <a href="/infracciones/" class="btn btn-secondary">Volver a la lista</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
